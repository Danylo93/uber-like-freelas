{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"]}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"]}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":128},"end":{"line":3,"column":45,"index":173}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"]}},{"name":"./AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":174},"end":{"line":4,"column":40,"index":214}}],"key":"YmpzODa+dVz64UAAYTI+RwJeEt0=","exportNames":["*"]}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useChat = exports.ChatProvider = void 0;\n  var _react = _interopRequireWildcard(require(_dependencyMap[1], \"react\"));\n  var _Alert = _interopRequireDefault(require(_dependencyMap[2], \"react-native-web/dist/exports/Alert\"));\n  var _api = require(_dependencyMap[3], \"../services/api\");\n  var _AuthContext = require(_dependencyMap[4], \"./AuthContext\");\n  var _jsxDevRuntime = require(_dependencyMap[5], \"react/jsx-dev-runtime\");\n  var _jsxFileName = \"/app/frontend/src/contexts/ChatContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) \"default\" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }\n  const ChatContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const ChatProvider = ({\n    children\n  }) => {\n    _s();\n    const {\n      user\n    } = (0, _AuthContext.useAuth)();\n    const [chats, setChats] = (0, _react.useState)([]);\n    const [messages, setMessages] = (0, _react.useState)({});\n    const [isLoading, setIsLoading] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      if (user) {\n        refreshChats();\n      }\n    }, [user]);\n    const refreshChats = async () => {\n      if (!user) return;\n      try {\n        setIsLoading(true);\n\n        // Get chats from backend\n        const response = await _api.apiService.get('/chats');\n        const backendChats = response.data || [];\n\n        // Transform backend data to match our interface\n        const transformedChats = backendChats.map(chat => ({\n          id: chat.id,\n          participants: chat.participants,\n          serviceRequestId: chat.service_request_id,\n          unreadCount: 0,\n          // TODO: Calculate unread count\n          participantNames: {\n            [user.id]: user.name,\n            // Get other participant name from backend data\n            ...Object.fromEntries(chat.participants.filter(id => id !== user.id).map(id => [id, chat.participant_name || 'Usuário']))\n          },\n          lastMessage: chat.last_message ? {\n            id: chat.last_message.id,\n            senderId: chat.last_message.sender_id,\n            receiverId: chat.last_message.receiver_id || '',\n            content: chat.last_message.content,\n            timestamp: new Date(chat.last_message.created_at),\n            read: !!chat.last_message.read_at,\n            type: chat.last_message.message_type,\n            serviceRequestId: chat.last_message.service_request_id\n          } : undefined\n        }));\n        setChats(transformedChats);\n      } catch (error) {\n        console.error('Error refreshing chats:', error);\n        // Fallback to empty array on error\n        setChats([]);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const loadMessages = async chatId => {\n      try {\n        const response = await _api.apiService.get(`/chats/${chatId}/messages`);\n        const backendMessages = response.data || [];\n\n        // Transform backend messages to match our interface\n        const transformedMessages = backendMessages.map(msg => ({\n          id: msg.id,\n          senderId: msg.sender_id,\n          receiverId: msg.receiver_id || '',\n          content: msg.content,\n          timestamp: new Date(msg.created_at),\n          read: !!msg.read_at,\n          type: msg.message_type,\n          serviceRequestId: msg.service_request_id\n        }));\n        setMessages(prev => ({\n          ...prev,\n          [chatId]: transformedMessages\n        }));\n      } catch (error) {\n        console.error('Error loading messages:', error);\n        // Set empty array on error\n        setMessages(prev => ({\n          ...prev,\n          [chatId]: []\n        }));\n      }\n    };\n    const sendMessage = async (chatId, content, type = 'text') => {\n      if (!user) return;\n      try {\n        setIsLoading(true);\n        const chat = chats.find(c => c.id === chatId);\n        if (!chat) return;\n        const receiverId = chat.participants.find(p => p !== user.id) || '';\n        const newMessage = {\n          id: `msg_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n          senderId: user.id,\n          receiverId,\n          content,\n          timestamp: new Date(),\n          read: false,\n          type,\n          serviceRequestId: chat.serviceRequestId\n        };\n\n        // Update local messages immediately (optimistic update)\n        setMessages(prev => ({\n          ...prev,\n          [chatId]: [...(prev[chatId] || []), newMessage]\n        }));\n\n        // Update chat last message\n        setChats(prev => prev.map(c => c.id === chatId ? {\n          ...c,\n          lastMessage: newMessage\n        } : c));\n\n        // Send message to backend\n        await _api.apiService.post(`/chats/${chatId}/messages`, {\n          content,\n          message_type: type,\n          service_request_id: chat.serviceRequestId\n        });\n        console.log('Message sent successfully:', newMessage);\n      } catch (error) {\n        console.error('Error sending message:', error);\n        _Alert.default.alert('Erro', 'Não foi possível enviar a mensagem');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const markAsRead = async chatId => {\n      if (!user) return;\n      try {\n        // Mark all messages as read\n        setMessages(prev => ({\n          ...prev,\n          [chatId]: prev[chatId]?.map(msg => msg.receiverId === user.id ? {\n            ...msg,\n            read: true\n          } : msg) || []\n        }));\n\n        // Update unread count\n        setChats(prev => prev.map(chat => chat.id === chatId ? {\n          ...chat,\n          unreadCount: 0\n        } : chat));\n\n        // Mark messages as read in backend\n        await _api.apiService.put(`/chats/${chatId}/read`);\n      } catch (error) {\n        console.error('Error marking as read:', error);\n      }\n    };\n    const createChat = async (participantId, participantName, serviceRequestId) => {\n      if (!user) throw new Error('User not authenticated');\n      try {\n        setIsLoading(true);\n        const chatId = serviceRequestId ? `service_${serviceRequestId}` : `chat_${Date.now()}`;\n        const newChat = {\n          id: chatId,\n          participants: [user.id, participantId],\n          unreadCount: 0,\n          serviceRequestId,\n          participantNames: {\n            [user.id]: user.name,\n            [participantId]: participantName\n          }\n        };\n        setChats(prev => [...prev, newChat]);\n        setMessages(prev => ({\n          ...prev,\n          [chatId]: []\n        }));\n\n        // Create chat in backend\n        await _api.apiService.post('/chats', {\n          participant_id: participantId,\n          service_request_id: serviceRequestId\n        });\n        return chatId;\n      } catch (error) {\n        console.error('Error creating chat:', error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const value = {\n      chats,\n      messages,\n      sendMessage,\n      markAsRead,\n      createChat,\n      refreshChats,\n      loadMessages,\n      isLoading\n    };\n    return /*#__PURE__*/(0, _jsxDevRuntime.jsxDEV)(ChatContext.Provider, {\n      value: value,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 5\n    }, this);\n  };\n  exports.ChatProvider = ChatProvider;\n  _s(ChatProvider, \"QDeg8X/QEefoabplXs4cUtGjizs=\", false, function () {\n    return [_AuthContext.useAuth];\n  });\n  _c = ChatProvider;\n  const useChat = () => {\n    _s2();\n    const context = (0, _react.useContext)(ChatContext);\n    if (!context) {\n      throw new Error('useChat must be used within a ChatProvider');\n    }\n    return context;\n  };\n  exports.useChat = useChat;\n  _s2(useChat, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"ChatProvider\");\n});","lineCount":240,"map":[[7,2,1,0],[7,6,1,0,"_react"],[7,12,1,0],[7,15,1,0,"_interopRequireWildcard"],[7,38,1,0],[7,39,1,0,"require"],[7,46,1,0],[7,47,1,0,"_dependencyMap"],[7,61,1,0],[8,2,1,89],[8,6,1,89,"_Alert"],[8,12,1,89],[8,15,1,89,"_interopRequireDefault"],[8,37,1,89],[8,38,1,89,"require"],[8,45,1,89],[8,46,1,89,"_dependencyMap"],[8,60,1,89],[9,2,3,0],[9,6,3,0,"_api"],[9,10,3,0],[9,13,3,0,"require"],[9,20,3,0],[9,21,3,0,"_dependencyMap"],[9,35,3,0],[10,2,4,0],[10,6,4,0,"_AuthContext"],[10,18,4,0],[10,21,4,0,"require"],[10,28,4,0],[10,29,4,0,"_dependencyMap"],[10,43,4,0],[11,2,4,40],[11,6,4,40,"_jsxDevRuntime"],[11,20,4,40],[11,23,4,40,"require"],[11,30,4,40],[11,31,4,40,"_dependencyMap"],[11,45,4,40],[12,2,4,40],[12,6,4,40,"_jsxFileName"],[12,18,4,40],[13,4,4,40,"_s"],[13,6,4,40],[13,9,4,40,"$RefreshSig$"],[13,21,4,40],[14,4,4,40,"_s2"],[14,7,4,40],[14,10,4,40,"$RefreshSig$"],[14,22,4,40],[15,2,4,40],[15,11,4,40,"_interopRequireWildcard"],[15,35,4,40,"e"],[15,36,4,40],[15,38,4,40,"t"],[15,39,4,40],[15,68,4,40,"WeakMap"],[15,75,4,40],[15,81,4,40,"r"],[15,82,4,40],[15,89,4,40,"WeakMap"],[15,96,4,40],[15,100,4,40,"n"],[15,101,4,40],[15,108,4,40,"WeakMap"],[15,115,4,40],[15,127,4,40,"_interopRequireWildcard"],[15,150,4,40],[15,162,4,40,"_interopRequireWildcard"],[15,163,4,40,"e"],[15,164,4,40],[15,166,4,40,"t"],[15,167,4,40],[15,176,4,40,"t"],[15,177,4,40],[15,181,4,40,"e"],[15,182,4,40],[15,186,4,40,"e"],[15,187,4,40],[15,188,4,40,"__esModule"],[15,198,4,40],[15,207,4,40,"e"],[15,208,4,40],[15,214,4,40,"o"],[15,215,4,40],[15,217,4,40,"i"],[15,218,4,40],[15,220,4,40,"f"],[15,221,4,40],[15,226,4,40,"__proto__"],[15,235,4,40],[15,243,4,40,"default"],[15,250,4,40],[15,252,4,40,"e"],[15,253,4,40],[15,270,4,40,"e"],[15,271,4,40],[15,294,4,40,"e"],[15,295,4,40],[15,320,4,40,"e"],[15,321,4,40],[15,330,4,40,"f"],[15,331,4,40],[15,337,4,40,"o"],[15,338,4,40],[15,341,4,40,"t"],[15,342,4,40],[15,345,4,40,"n"],[15,346,4,40],[15,349,4,40,"r"],[15,350,4,40],[15,358,4,40,"o"],[15,359,4,40],[15,360,4,40,"has"],[15,363,4,40],[15,364,4,40,"e"],[15,365,4,40],[15,375,4,40,"o"],[15,376,4,40],[15,377,4,40,"get"],[15,380,4,40],[15,381,4,40,"e"],[15,382,4,40],[15,385,4,40,"o"],[15,386,4,40],[15,387,4,40,"set"],[15,390,4,40],[15,391,4,40,"e"],[15,392,4,40],[15,394,4,40,"f"],[15,395,4,40],[15,411,4,40,"t"],[15,412,4,40],[15,416,4,40,"e"],[15,417,4,40],[15,433,4,40,"t"],[15,434,4,40],[15,441,4,40,"hasOwnProperty"],[15,455,4,40],[15,456,4,40,"call"],[15,460,4,40],[15,461,4,40,"e"],[15,462,4,40],[15,464,4,40,"t"],[15,465,4,40],[15,472,4,40,"i"],[15,473,4,40],[15,477,4,40,"o"],[15,478,4,40],[15,481,4,40,"Object"],[15,487,4,40],[15,488,4,40,"defineProperty"],[15,502,4,40],[15,507,4,40,"Object"],[15,513,4,40],[15,514,4,40,"getOwnPropertyDescriptor"],[15,538,4,40],[15,539,4,40,"e"],[15,540,4,40],[15,542,4,40,"t"],[15,543,4,40],[15,550,4,40,"i"],[15,551,4,40],[15,552,4,40,"get"],[15,555,4,40],[15,559,4,40,"i"],[15,560,4,40],[15,561,4,40,"set"],[15,564,4,40],[15,568,4,40,"o"],[15,569,4,40],[15,570,4,40,"f"],[15,571,4,40],[15,573,4,40,"t"],[15,574,4,40],[15,576,4,40,"i"],[15,577,4,40],[15,581,4,40,"f"],[15,582,4,40],[15,583,4,40,"t"],[15,584,4,40],[15,588,4,40,"e"],[15,589,4,40],[15,590,4,40,"t"],[15,591,4,40],[15,602,4,40,"f"],[15,603,4,40],[15,608,4,40,"e"],[15,609,4,40],[15,611,4,40,"t"],[15,612,4,40],[16,2,37,0],[16,8,37,6,"ChatContext"],[16,19,37,17],[16,35,37,20],[16,39,37,20,"createContext"],[16,59,37,33],[16,61,37,63,"undefined"],[16,70,37,72],[16,71,37,73],[17,2,43,7],[17,8,43,13,"ChatProvider"],[17,20,43,54],[17,23,43,57,"ChatProvider"],[17,24,43,58],[18,4,43,60,"children"],[19,2,43,69],[19,3,43,70],[19,8,43,75],[20,4,43,75,"_s"],[20,6,43,75],[21,4,44,2],[21,10,44,8],[22,6,44,10,"user"],[23,4,44,15],[23,5,44,16],[23,8,44,19],[23,12,44,19,"useAuth"],[23,32,44,26],[23,34,44,27],[23,35,44,28],[24,4,45,2],[24,10,45,8],[24,11,45,9,"chats"],[24,16,45,14],[24,18,45,16,"setChats"],[24,26,45,24],[24,27,45,25],[24,30,45,28],[24,34,45,28,"useState"],[24,49,45,36],[24,51,45,45],[24,53,45,47],[24,54,45,48],[25,4,46,2],[25,10,46,8],[25,11,46,9,"messages"],[25,19,46,17],[25,21,46,19,"setMessages"],[25,32,46,30],[25,33,46,31],[25,36,46,34],[25,40,46,34,"useState"],[25,55,46,42],[25,57,46,70],[25,58,46,71],[25,59,46,72],[25,60,46,73],[26,4,47,2],[26,10,47,8],[26,11,47,9,"isLoading"],[26,20,47,18],[26,22,47,20,"setIsLoading"],[26,34,47,32],[26,35,47,33],[26,38,47,36],[26,42,47,36,"useState"],[26,57,47,44],[26,59,47,45],[26,64,47,50],[26,65,47,51],[27,4,49,2],[27,8,49,2,"useEffect"],[27,24,49,11],[27,26,49,12],[27,32,49,18],[28,6,50,4],[28,10,50,8,"user"],[28,14,50,12],[28,16,50,14],[29,8,51,6,"refreshChats"],[29,20,51,18],[29,21,51,19],[29,22,51,20],[30,6,52,4],[31,4,53,2],[31,5,53,3],[31,7,53,5],[31,8,53,6,"user"],[31,12,53,10],[31,13,53,11],[31,14,53,12],[32,4,55,2],[32,10,55,8,"refreshChats"],[32,22,55,20],[32,25,55,23],[32,31,55,23,"refreshChats"],[32,32,55,23],[32,37,55,35],[33,6,56,4],[33,10,56,8],[33,11,56,9,"user"],[33,15,56,13],[33,17,56,15],[34,6,58,4],[34,10,58,8],[35,8,59,6,"setIsLoading"],[35,20,59,18],[35,21,59,19],[35,25,59,23],[35,26,59,24],[37,8,61,6],[38,8,62,6],[38,14,62,12,"response"],[38,22,62,20],[38,25,62,23],[38,31,62,29,"apiService"],[38,46,62,39],[38,47,62,40,"get"],[38,50,62,43],[38,51,62,44],[38,59,62,52],[38,60,62,53],[39,8,63,6],[39,14,63,12,"backendChats"],[39,26,63,24],[39,29,63,27,"response"],[39,37,63,35],[39,38,63,36,"data"],[39,42,63,40],[39,46,63,44],[39,48,63,46],[41,8,65,6],[42,8,66,6],[42,14,66,12,"transformedChats"],[42,30,66,36],[42,33,66,39,"backendChats"],[42,45,66,51],[42,46,66,52,"map"],[42,49,66,55],[42,50,66,57,"chat"],[42,54,66,66],[42,59,66,72],[43,10,67,8,"id"],[43,12,67,10],[43,14,67,12,"chat"],[43,18,67,16],[43,19,67,17,"id"],[43,21,67,19],[44,10,68,8,"participants"],[44,22,68,20],[44,24,68,22,"chat"],[44,28,68,26],[44,29,68,27,"participants"],[44,41,68,39],[45,10,69,8,"serviceRequestId"],[45,26,69,24],[45,28,69,26,"chat"],[45,32,69,30],[45,33,69,31,"service_request_id"],[45,51,69,49],[46,10,70,8,"unreadCount"],[46,21,70,19],[46,23,70,21],[46,24,70,22],[47,10,70,24],[48,10,71,8,"participantNames"],[48,26,71,24],[48,28,71,26],[49,12,72,10],[49,13,72,11,"user"],[49,17,72,15],[49,18,72,16,"id"],[49,20,72,18],[49,23,72,21,"user"],[49,27,72,25],[49,28,72,26,"name"],[49,32,72,30],[50,12,73,10],[51,12,74,10],[51,15,74,13,"Object"],[51,21,74,19],[51,22,74,20,"fromEntries"],[51,33,74,31],[51,34,75,12,"chat"],[51,38,75,16],[51,39,75,17,"participants"],[51,51,75,29],[51,52,76,15,"filter"],[51,58,76,21],[51,59,76,23,"id"],[51,61,76,33],[51,65,76,38,"id"],[51,67,76,40],[51,72,76,45,"user"],[51,76,76,49],[51,77,76,50,"id"],[51,79,76,52],[51,80,76,53],[51,81,77,15,"map"],[51,84,77,18],[51,85,77,20,"id"],[51,87,77,30],[51,91,77,35],[51,92,77,36,"id"],[51,94,77,38],[51,96,77,40,"chat"],[51,100,77,44],[51,101,77,45,"participant_name"],[51,117,77,61],[51,121,77,65],[51,130,77,74],[51,131,77,75],[51,132,78,10],[52,10,79,8],[52,11,79,9],[53,10,80,8,"lastMessage"],[53,21,80,19],[53,23,80,21,"chat"],[53,27,80,25],[53,28,80,26,"last_message"],[53,40,80,38],[53,43,80,41],[54,12,81,10,"id"],[54,14,81,12],[54,16,81,14,"chat"],[54,20,81,18],[54,21,81,19,"last_message"],[54,33,81,31],[54,34,81,32,"id"],[54,36,81,34],[55,12,82,10,"senderId"],[55,20,82,18],[55,22,82,20,"chat"],[55,26,82,24],[55,27,82,25,"last_message"],[55,39,82,37],[55,40,82,38,"sender_id"],[55,49,82,47],[56,12,83,10,"receiverId"],[56,22,83,20],[56,24,83,22,"chat"],[56,28,83,26],[56,29,83,27,"last_message"],[56,41,83,39],[56,42,83,40,"receiver_id"],[56,53,83,51],[56,57,83,55],[56,59,83,57],[57,12,84,10,"content"],[57,19,84,17],[57,21,84,19,"chat"],[57,25,84,23],[57,26,84,24,"last_message"],[57,38,84,36],[57,39,84,37,"content"],[57,46,84,44],[58,12,85,10,"timestamp"],[58,21,85,19],[58,23,85,21],[58,27,85,25,"Date"],[58,31,85,29],[58,32,85,30,"chat"],[58,36,85,34],[58,37,85,35,"last_message"],[58,49,85,47],[58,50,85,48,"created_at"],[58,60,85,58],[58,61,85,59],[59,12,86,10,"read"],[59,16,86,14],[59,18,86,16],[59,19,86,17],[59,20,86,18,"chat"],[59,24,86,22],[59,25,86,23,"last_message"],[59,37,86,35],[59,38,86,36,"read_at"],[59,45,86,43],[60,12,87,10,"type"],[60,16,87,14],[60,18,87,16,"chat"],[60,22,87,20],[60,23,87,21,"last_message"],[60,35,87,33],[60,36,87,34,"message_type"],[60,48,87,79],[61,12,88,10,"serviceRequestId"],[61,28,88,26],[61,30,88,28,"chat"],[61,34,88,32],[61,35,88,33,"last_message"],[61,47,88,45],[61,48,88,46,"service_request_id"],[62,10,89,8],[62,11,89,9],[62,14,89,12,"undefined"],[63,8,90,6],[63,9,90,7],[63,10,90,8],[63,11,90,9],[64,8,92,6,"setChats"],[64,16,92,14],[64,17,92,15,"transformedChats"],[64,33,92,31],[64,34,92,32],[65,6,94,4],[65,7,94,5],[65,8,94,6],[65,15,94,13,"error"],[65,20,94,18],[65,22,94,20],[66,8,95,6,"console"],[66,15,95,13],[66,16,95,14,"error"],[66,21,95,19],[66,22,95,20],[66,47,95,45],[66,49,95,47,"error"],[66,54,95,52],[66,55,95,53],[67,8,96,6],[68,8,97,6,"setChats"],[68,16,97,14],[68,17,97,15],[68,19,97,17],[68,20,97,18],[69,6,98,4],[69,7,98,5],[69,16,98,14],[70,8,99,6,"setIsLoading"],[70,20,99,18],[70,21,99,19],[70,26,99,24],[70,27,99,25],[71,6,100,4],[72,4,101,2],[72,5,101,3],[73,4,103,2],[73,10,103,8,"loadMessages"],[73,22,103,20],[73,25,103,23],[73,31,103,30,"chatId"],[73,37,103,44],[73,41,103,49],[74,6,104,4],[74,10,104,8],[75,8,105,6],[75,14,105,12,"response"],[75,22,105,20],[75,25,105,23],[75,31,105,29,"apiService"],[75,46,105,39],[75,47,105,40,"get"],[75,50,105,43],[75,51,105,44],[75,61,105,54,"chatId"],[75,67,105,60],[75,78,105,71],[75,79,105,72],[76,8,106,6],[76,14,106,12,"backendMessages"],[76,29,106,27],[76,32,106,30,"response"],[76,40,106,38],[76,41,106,39,"data"],[76,45,106,43],[76,49,106,47],[76,51,106,49],[78,8,108,6],[79,8,109,6],[79,14,109,12,"transformedMessages"],[79,33,109,42],[79,36,109,45,"backendMessages"],[79,51,109,60],[79,52,109,61,"map"],[79,55,109,64],[79,56,109,66,"msg"],[79,59,109,74],[79,64,109,80],[80,10,110,8,"id"],[80,12,110,10],[80,14,110,12,"msg"],[80,17,110,15],[80,18,110,16,"id"],[80,20,110,18],[81,10,111,8,"senderId"],[81,18,111,16],[81,20,111,18,"msg"],[81,23,111,21],[81,24,111,22,"sender_id"],[81,33,111,31],[82,10,112,8,"receiverId"],[82,20,112,18],[82,22,112,20,"msg"],[82,25,112,23],[82,26,112,24,"receiver_id"],[82,37,112,35],[82,41,112,39],[82,43,112,41],[83,10,113,8,"content"],[83,17,113,15],[83,19,113,17,"msg"],[83,22,113,20],[83,23,113,21,"content"],[83,30,113,28],[84,10,114,8,"timestamp"],[84,19,114,17],[84,21,114,19],[84,25,114,23,"Date"],[84,29,114,27],[84,30,114,28,"msg"],[84,33,114,31],[84,34,114,32,"created_at"],[84,44,114,42],[84,45,114,43],[85,10,115,8,"read"],[85,14,115,12],[85,16,115,14],[85,17,115,15],[85,18,115,16,"msg"],[85,21,115,19],[85,22,115,20,"read_at"],[85,29,115,27],[86,10,116,8,"type"],[86,14,116,12],[86,16,116,14,"msg"],[86,19,116,17],[86,20,116,18,"message_type"],[86,32,116,63],[87,10,117,8,"serviceRequestId"],[87,26,117,24],[87,28,117,26,"msg"],[87,31,117,29],[87,32,117,30,"service_request_id"],[88,8,118,6],[88,9,118,7],[88,10,118,8],[88,11,118,9],[89,8,120,6,"setMessages"],[89,19,120,17],[89,20,120,18,"prev"],[89,24,120,22],[89,29,120,27],[90,10,121,8],[90,13,121,11,"prev"],[90,17,121,15],[91,10,122,8],[91,11,122,9,"chatId"],[91,17,122,15],[91,20,122,18,"transformedMessages"],[92,8,123,6],[92,9,123,7],[92,10,123,8],[92,11,123,9],[93,6,124,4],[93,7,124,5],[93,8,124,6],[93,15,124,13,"error"],[93,20,124,18],[93,22,124,20],[94,8,125,6,"console"],[94,15,125,13],[94,16,125,14,"error"],[94,21,125,19],[94,22,125,20],[94,47,125,45],[94,49,125,47,"error"],[94,54,125,52],[94,55,125,53],[95,8,126,6],[96,8,127,6,"setMessages"],[96,19,127,17],[96,20,127,18,"prev"],[96,24,127,22],[96,29,127,27],[97,10,128,8],[97,13,128,11,"prev"],[97,17,128,15],[98,10,129,8],[98,11,129,9,"chatId"],[98,17,129,15],[98,20,129,18],[99,8,130,6],[99,9,130,7],[99,10,130,8],[99,11,130,9],[100,6,131,4],[101,4,132,2],[101,5,132,3],[102,4,134,2],[102,10,134,8,"sendMessage"],[102,21,134,19],[102,24,134,22],[102,30,134,22,"sendMessage"],[102,31,134,29,"chatId"],[102,37,134,43],[102,39,134,45,"content"],[102,46,134,60],[102,48,134,62,"type"],[102,52,134,97],[102,55,134,100],[102,61,134,106],[102,66,134,111],[103,6,135,4],[103,10,135,8],[103,11,135,9,"user"],[103,15,135,13],[103,17,135,15],[104,6,137,4],[104,10,137,8],[105,8,138,6,"setIsLoading"],[105,20,138,18],[105,21,138,19],[105,25,138,23],[105,26,138,24],[106,8,140,6],[106,14,140,12,"chat"],[106,18,140,16],[106,21,140,19,"chats"],[106,26,140,24],[106,27,140,25,"find"],[106,31,140,29],[106,32,140,30,"c"],[106,33,140,31],[106,37,140,35,"c"],[106,38,140,36],[106,39,140,37,"id"],[106,41,140,39],[106,46,140,44,"chatId"],[106,52,140,50],[106,53,140,51],[107,8,141,6],[107,12,141,10],[107,13,141,11,"chat"],[107,17,141,15],[107,19,141,17],[108,8,143,6],[108,14,143,12,"receiverId"],[108,24,143,22],[108,27,143,25,"chat"],[108,31,143,29],[108,32,143,30,"participants"],[108,44,143,42],[108,45,143,43,"find"],[108,49,143,47],[108,50,143,48,"p"],[108,51,143,49],[108,55,143,53,"p"],[108,56,143,54],[108,61,143,59,"user"],[108,65,143,63],[108,66,143,64,"id"],[108,68,143,66],[108,69,143,67],[108,73,143,71],[108,75,143,73],[109,8,145,6],[109,14,145,12,"newMessage"],[109,24,145,31],[109,27,145,34],[110,10,146,8,"id"],[110,12,146,10],[110,14,146,12],[110,21,146,19,"Date"],[110,25,146,23],[110,26,146,24,"now"],[110,29,146,27],[110,30,146,28],[110,31,146,29],[110,35,146,33,"Math"],[110,39,146,37],[110,40,146,38,"random"],[110,46,146,44],[110,47,146,45],[110,48,146,46],[110,49,146,47,"toString"],[110,57,146,55],[110,58,146,56],[110,60,146,58],[110,61,146,59],[110,62,146,60,"substr"],[110,68,146,66],[110,69,146,67],[110,70,146,68],[110,72,146,70],[110,73,146,71],[110,74,146,72],[110,76,146,74],[111,10,147,8,"senderId"],[111,18,147,16],[111,20,147,18,"user"],[111,24,147,22],[111,25,147,23,"id"],[111,27,147,25],[112,10,148,8,"receiverId"],[112,20,148,18],[113,10,149,8,"content"],[113,17,149,15],[114,10,150,8,"timestamp"],[114,19,150,17],[114,21,150,19],[114,25,150,23,"Date"],[114,29,150,27],[114,30,150,28],[114,31,150,29],[115,10,151,8,"read"],[115,14,151,12],[115,16,151,14],[115,21,151,19],[116,10,152,8,"type"],[116,14,152,12],[117,10,153,8,"serviceRequestId"],[117,26,153,24],[117,28,153,26,"chat"],[117,32,153,30],[117,33,153,31,"serviceRequestId"],[118,8,154,6],[118,9,154,7],[120,8,156,6],[121,8,157,6,"setMessages"],[121,19,157,17],[121,20,157,18,"prev"],[121,24,157,22],[121,29,157,27],[122,10,158,8],[122,13,158,11,"prev"],[122,17,158,15],[123,10,159,8],[123,11,159,9,"chatId"],[123,17,159,15],[123,20,159,18],[123,21,159,19],[123,25,159,23,"prev"],[123,29,159,27],[123,30,159,28,"chatId"],[123,36,159,34],[123,37,159,35],[123,41,159,39],[123,43,159,41],[123,44,159,42],[123,46,159,44,"newMessage"],[123,56,159,54],[124,8,160,6],[124,9,160,7],[124,10,160,8],[124,11,160,9],[126,8,162,6],[127,8,163,6,"setChats"],[127,16,163,14],[127,17,163,15,"prev"],[127,21,163,19],[127,25,164,8,"prev"],[127,29,164,12],[127,30,164,13,"map"],[127,33,164,16],[127,34,164,17,"c"],[127,35,164,18],[127,39,165,10,"c"],[127,40,165,11],[127,41,165,12,"id"],[127,43,165,14],[127,48,165,19,"chatId"],[127,54,165,25],[127,57,166,14],[128,10,166,16],[128,13,166,19,"c"],[128,14,166,20],[129,10,166,22,"lastMessage"],[129,21,166,33],[129,23,166,35,"newMessage"],[130,8,166,46],[130,9,166,47],[130,12,167,14,"c"],[130,13,168,8],[130,14,169,6],[130,15,169,7],[132,8,171,6],[133,8,172,6],[133,14,172,12,"apiService"],[133,29,172,22],[133,30,172,23,"post"],[133,34,172,27],[133,35,172,28],[133,45,172,38,"chatId"],[133,51,172,44],[133,62,172,55],[133,64,172,57],[134,10,173,8,"content"],[134,17,173,15],[135,10,174,8,"message_type"],[135,22,174,20],[135,24,174,22,"type"],[135,28,174,26],[136,10,175,8,"service_request_id"],[136,28,175,26],[136,30,175,28,"chat"],[136,34,175,32],[136,35,175,33,"serviceRequestId"],[137,8,176,6],[137,9,176,7],[137,10,176,8],[138,8,178,6,"console"],[138,15,178,13],[138,16,178,14,"log"],[138,19,178,17],[138,20,178,18],[138,48,178,46],[138,50,178,48,"newMessage"],[138,60,178,58],[138,61,178,59],[139,6,180,4],[139,7,180,5],[139,8,180,6],[139,15,180,13,"error"],[139,20,180,18],[139,22,180,20],[140,8,181,6,"console"],[140,15,181,13],[140,16,181,14,"error"],[140,21,181,19],[140,22,181,20],[140,46,181,44],[140,48,181,46,"error"],[140,53,181,51],[140,54,181,52],[141,8,182,6,"Alert"],[141,22,182,11],[141,23,182,12,"alert"],[141,28,182,17],[141,29,182,18],[141,35,182,24],[141,37,182,26],[141,73,182,62],[141,74,182,63],[142,6,183,4],[142,7,183,5],[142,16,183,14],[143,8,184,6,"setIsLoading"],[143,20,184,18],[143,21,184,19],[143,26,184,24],[143,27,184,25],[144,6,185,4],[145,4,186,2],[145,5,186,3],[146,4,188,2],[146,10,188,8,"markAsRead"],[146,20,188,18],[146,23,188,21],[146,29,188,28,"chatId"],[146,35,188,42],[146,39,188,47],[147,6,189,4],[147,10,189,8],[147,11,189,9,"user"],[147,15,189,13],[147,17,189,15],[148,6,191,4],[148,10,191,8],[149,8,192,6],[150,8,193,6,"setMessages"],[150,19,193,17],[150,20,193,18,"prev"],[150,24,193,22],[150,29,193,27],[151,10,194,8],[151,13,194,11,"prev"],[151,17,194,15],[152,10,195,8],[152,11,195,9,"chatId"],[152,17,195,15],[152,20,195,18,"prev"],[152,24,195,22],[152,25,195,23,"chatId"],[152,31,195,29],[152,32,195,30],[152,34,195,32,"map"],[152,37,195,35],[152,38,195,36,"msg"],[152,41,195,39],[152,45,196,10,"msg"],[152,48,196,13],[152,49,196,14,"receiverId"],[152,59,196,24],[152,64,196,29,"user"],[152,68,196,33],[152,69,196,34,"id"],[152,71,196,36],[152,74,196,39],[153,12,196,41],[153,15,196,44,"msg"],[153,18,196,47],[154,12,196,49,"read"],[154,16,196,53],[154,18,196,55],[155,10,196,60],[155,11,196,61],[155,14,196,64,"msg"],[155,17,197,8],[155,18,197,9],[155,22,197,13],[156,8,198,6],[156,9,198,7],[156,10,198,8],[156,11,198,9],[158,8,200,6],[159,8,201,6,"setChats"],[159,16,201,14],[159,17,201,15,"prev"],[159,21,201,19],[159,25,202,8,"prev"],[159,29,202,12],[159,30,202,13,"map"],[159,33,202,16],[159,34,202,17,"chat"],[159,38,202,21],[159,42,203,10,"chat"],[159,46,203,14],[159,47,203,15,"id"],[159,49,203,17],[159,54,203,22,"chatId"],[159,60,203,28],[159,63,204,14],[160,10,204,16],[160,13,204,19,"chat"],[160,17,204,23],[161,10,204,25,"unreadCount"],[161,21,204,36],[161,23,204,38],[162,8,204,40],[162,9,204,41],[162,12,205,14,"chat"],[162,16,206,8],[162,17,207,6],[162,18,207,7],[164,8,209,6],[165,8,210,6],[165,14,210,12,"apiService"],[165,29,210,22],[165,30,210,23,"put"],[165,33,210,26],[165,34,210,27],[165,44,210,37,"chatId"],[165,50,210,43],[165,57,210,50],[165,58,210,51],[166,6,212,4],[166,7,212,5],[166,8,212,6],[166,15,212,13,"error"],[166,20,212,18],[166,22,212,20],[167,8,213,6,"console"],[167,15,213,13],[167,16,213,14,"error"],[167,21,213,19],[167,22,213,20],[167,46,213,44],[167,48,213,46,"error"],[167,53,213,51],[167,54,213,52],[168,6,214,4],[169,4,215,2],[169,5,215,3],[170,4,217,2],[170,10,217,8,"createChat"],[170,20,217,18],[170,23,217,21],[170,29,217,21,"createChat"],[170,30,217,28,"participantId"],[170,43,217,49],[170,45,217,51,"participantName"],[170,60,217,74],[170,62,217,76,"serviceRequestId"],[170,78,217,101],[170,83,217,123],[171,6,218,4],[171,10,218,8],[171,11,218,9,"user"],[171,15,218,13],[171,17,218,15],[171,23,218,21],[171,27,218,25,"Error"],[171,32,218,30],[171,33,218,31],[171,57,218,55],[171,58,218,56],[172,6,220,4],[172,10,220,8],[173,8,221,6,"setIsLoading"],[173,20,221,18],[173,21,221,19],[173,25,221,23],[173,26,221,24],[174,8,223,6],[174,14,223,12,"chatId"],[174,20,223,18],[174,23,223,21,"serviceRequestId"],[174,39,223,37],[174,42,223,40],[174,53,223,51,"serviceRequestId"],[174,69,223,67],[174,71,223,69],[174,74,223,72],[174,82,223,80,"Date"],[174,86,223,84],[174,87,223,85,"now"],[174,90,223,88],[174,91,223,89],[174,92,223,90],[174,94,223,92],[175,8,225,6],[175,14,225,12,"newChat"],[175,21,225,25],[175,24,225,28],[176,10,226,8,"id"],[176,12,226,10],[176,14,226,12,"chatId"],[176,20,226,18],[177,10,227,8,"participants"],[177,22,227,20],[177,24,227,22],[177,25,227,23,"user"],[177,29,227,27],[177,30,227,28,"id"],[177,32,227,30],[177,34,227,32,"participantId"],[177,47,227,45],[177,48,227,46],[178,10,228,8,"unreadCount"],[178,21,228,19],[178,23,228,21],[178,24,228,22],[179,10,229,8,"serviceRequestId"],[179,26,229,24],[180,10,230,8,"participantNames"],[180,26,230,24],[180,28,230,26],[181,12,231,10],[181,13,231,11,"user"],[181,17,231,15],[181,18,231,16,"id"],[181,20,231,18],[181,23,231,21,"user"],[181,27,231,25],[181,28,231,26,"name"],[181,32,231,30],[182,12,232,10],[182,13,232,11,"participantId"],[182,26,232,24],[182,29,232,27,"participantName"],[183,10,233,8],[184,8,234,6],[184,9,234,7],[185,8,236,6,"setChats"],[185,16,236,14],[185,17,236,15,"prev"],[185,21,236,19],[185,25,236,23],[185,26,236,24],[185,29,236,27,"prev"],[185,33,236,31],[185,35,236,33,"newChat"],[185,42,236,40],[185,43,236,41],[185,44,236,42],[186,8,237,6,"setMessages"],[186,19,237,17],[186,20,237,18,"prev"],[186,24,237,22],[186,29,237,27],[187,10,237,29],[187,13,237,32,"prev"],[187,17,237,36],[188,10,237,38],[188,11,237,39,"chatId"],[188,17,237,45],[188,20,237,48],[189,8,237,51],[189,9,237,52],[189,10,237,53],[189,11,237,54],[191,8,239,6],[192,8,240,6],[192,14,240,12,"apiService"],[192,29,240,22],[192,30,240,23,"post"],[192,34,240,27],[192,35,240,28],[192,43,240,36],[192,45,240,38],[193,10,241,8,"participant_id"],[193,24,241,22],[193,26,241,24,"participantId"],[193,39,241,37],[194,10,242,8,"service_request_id"],[194,28,242,26],[194,30,242,28,"serviceRequestId"],[195,8,243,6],[195,9,243,7],[195,10,243,8],[196,8,245,6],[196,15,245,13,"chatId"],[196,21,245,19],[197,6,247,4],[197,7,247,5],[197,8,247,6],[197,15,247,13,"error"],[197,20,247,18],[197,22,247,20],[198,8,248,6,"console"],[198,15,248,13],[198,16,248,14,"error"],[198,21,248,19],[198,22,248,20],[198,44,248,42],[198,46,248,44,"error"],[198,51,248,49],[198,52,248,50],[199,8,249,6],[199,14,249,12,"error"],[199,19,249,17],[200,6,250,4],[200,7,250,5],[200,16,250,14],[201,8,251,6,"setIsLoading"],[201,20,251,18],[201,21,251,19],[201,26,251,24],[201,27,251,25],[202,6,252,4],[203,4,253,2],[203,5,253,3],[204,4,255,2],[204,10,255,8,"value"],[204,15,255,30],[204,18,255,33],[205,6,256,4,"chats"],[205,11,256,9],[206,6,257,4,"messages"],[206,14,257,12],[207,6,258,4,"sendMessage"],[207,17,258,15],[208,6,259,4,"markAsRead"],[208,16,259,14],[209,6,260,4,"createChat"],[209,16,260,14],[210,6,261,4,"refreshChats"],[210,18,261,16],[211,6,262,4,"loadMessages"],[211,18,262,16],[212,6,263,4,"isLoading"],[213,4,264,2],[213,5,264,3],[214,4,266,2],[214,24,267,4],[214,28,267,4,"_jsxDevRuntime"],[214,42,267,4],[214,43,267,4,"jsxDEV"],[214,49,267,4],[214,51,267,5,"ChatContext"],[214,62,267,16],[214,63,267,17,"Provider"],[214,71,267,25],[215,6,267,26,"value"],[215,11,267,31],[215,13,267,33,"value"],[215,18,267,39],[216,6,267,39,"children"],[216,14,267,39],[216,16,268,7,"children"],[217,4,268,15],[218,6,268,15,"fileName"],[218,14,268,15],[218,16,268,15,"_jsxFileName"],[218,28,268,15],[219,6,268,15,"lineNumber"],[219,16,268,15],[220,6,268,15,"columnNumber"],[220,18,268,15],[221,4,268,15],[221,11,269,26],[221,12,269,27],[222,2,271,0],[222,3,271,1],[223,2,271,2,"exports"],[223,9,271,2],[223,10,271,2,"ChatProvider"],[223,22,271,2],[223,25,271,2,"ChatProvider"],[223,37,271,2],[224,2,271,2,"_s"],[224,4,271,2],[224,5,43,13,"ChatProvider"],[224,17,43,54],[225,4,43,54],[225,12,44,19,"useAuth"],[225,32,44,26],[226,2,44,26],[227,2,44,26,"_c"],[227,4,44,26],[227,7,43,13,"ChatProvider"],[227,19,43,54],[228,2,273,7],[228,8,273,13,"useChat"],[228,15,273,20],[228,18,273,23,"useChat"],[228,19,273,23],[228,24,273,46],[229,4,273,46,"_s2"],[229,7,273,46],[230,4,274,2],[230,10,274,8,"context"],[230,17,274,15],[230,20,274,18],[230,24,274,18,"useContext"],[230,41,274,28],[230,43,274,29,"ChatContext"],[230,54,274,40],[230,55,274,41],[231,4,275,2],[231,8,275,6],[231,9,275,7,"context"],[231,16,275,14],[231,18,275,16],[232,6,276,4],[232,12,276,10],[232,16,276,14,"Error"],[232,21,276,19],[232,22,276,20],[232,66,276,64],[232,67,276,65],[233,4,277,2],[234,4,278,2],[234,11,278,9,"context"],[234,18,278,16],[235,2,279,0],[235,3,279,1],[236,2,279,2,"exports"],[236,9,279,2],[236,10,279,2,"useChat"],[236,17,279,2],[236,20,279,2,"useChat"],[236,27,279,2],[237,2,279,2,"_s2"],[237,5,279,2],[237,6,273,13,"useChat"],[237,13,273,20],[238,2,273,20],[238,6,273,20,"_c"],[238,8,273,20],[239,2,273,20,"$RefreshReg$"],[239,14,273,20],[239,15,273,20,"_c"],[239,17,273,20],[240,0,273,20],[240,3]],"functionMap":{"names":["<global>","ChatProvider","useEffect$argument_0","refreshChats","backendChats.map$argument_0","chat.participants.filter$argument_0","chat.participants.filter.map$argument_0","loadMessages","backendMessages.map$argument_0","setMessages$argument_0","sendMessage","chats.find$argument_0","chat.participants.find$argument_0","setChats$argument_0","prev.map$argument_0","markAsRead","prev.chatId.map$argument_0","createChat","useChat"],"mappings":"AAA;yDC0C;YCM;GDI;uBEE;wDCW;sBCU,8BD;mBEC,wDF;QDa;GFW;uBME;iECM;QDS;kBEE;QFG;kBEI;QFG;GNE;sBSE;8BCM,oBD;gDEG,kBF;kBDc;QCG;eGG;iBCC;eDG;SHC;GTkB;qBcE;kBNK;oCOE;mEPC;QME;eFG;iBCC;kBDG;SEC;GdS;qBgBE;eJmB,0BI;kBRC,mCQ;GhBgB;CDkB;uBkBE;ClBM"}},"type":"js/module"}]}