{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var RingBuffer = function (bufferSize) {\n    this._bufferSize = bufferSize;\n    this.clear();\n  };\n  RingBuffer.prototype.clear = function () {\n    this._buffer = new Array(this._bufferSize);\n    this._ringOffset = 0;\n    this._ringSize = this._bufferSize;\n    this._head = 0;\n    this._tail = 0;\n    this.length = 0;\n  };\n  RingBuffer.prototype.push = function (value) {\n    var expandBuffer = false,\n      expandRing = false;\n    if (this._ringSize < this._bufferSize) {\n      expandBuffer = this._tail === 0;\n    } else if (this._ringOffset === this._ringSize) {\n      expandBuffer = true;\n      expandRing = this._tail === 0;\n    }\n    if (expandBuffer) {\n      this._tail = this._bufferSize;\n      this._buffer = this._buffer.concat(new Array(this._bufferSize));\n      this._bufferSize = this._buffer.length;\n      if (expandRing) this._ringSize = this._bufferSize;\n    }\n    this._buffer[this._tail] = value;\n    this.length += 1;\n    if (this._tail < this._ringSize) this._ringOffset += 1;\n    this._tail = (this._tail + 1) % this._bufferSize;\n  };\n  RingBuffer.prototype.peek = function () {\n    if (this.length === 0) return void 0;\n    return this._buffer[this._head];\n  };\n  RingBuffer.prototype.shift = function () {\n    if (this.length === 0) return void 0;\n    var value = this._buffer[this._head];\n    this._buffer[this._head] = void 0;\n    this.length -= 1;\n    this._ringOffset -= 1;\n    if (this._ringOffset === 0 && this.length > 0) {\n      this._head = this._ringSize;\n      this._ringOffset = this.length;\n      this._ringSize = this._bufferSize;\n    } else {\n      this._head = (this._head + 1) % this._ringSize;\n    }\n    return value;\n  };\n  module.exports = RingBuffer;\n});","lineCount":56,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[4,6,3,4,"RingBuffer"],[4,16,3,14],[4,19,3,17],[4,28,3,17,"RingBuffer"],[4,29,3,26,"bufferSize"],[4,39,3,36],[4,41,3,38],[5,4,4,2],[5,8,4,6],[5,9,4,7,"_bufferSize"],[5,20,4,18],[5,23,4,21,"bufferSize"],[5,33,4,31],[6,4,5,2],[6,8,5,6],[6,9,5,7,"clear"],[6,14,5,12],[6,15,5,13],[6,16,5,14],[7,2,6,0],[7,3,6,1],[8,2,8,0,"RingBuffer"],[8,12,8,10],[8,13,8,11,"prototype"],[8,22,8,20],[8,23,8,21,"clear"],[8,28,8,26],[8,31,8,29],[8,43,8,40],[9,4,9,2],[9,8,9,6],[9,9,9,7,"_buffer"],[9,16,9,14],[9,19,9,21],[9,23,9,25,"Array"],[9,28,9,30],[9,29,9,31],[9,33,9,35],[9,34,9,36,"_bufferSize"],[9,45,9,47],[9,46,9,48],[10,4,10,2],[10,8,10,6],[10,9,10,7,"_ringOffset"],[10,20,10,18],[10,23,10,21],[10,24,10,22],[11,4,11,2],[11,8,11,6],[11,9,11,7,"_ringSize"],[11,18,11,16],[11,21,11,21],[11,25,11,25],[11,26,11,26,"_bufferSize"],[11,37,11,37],[12,4,12,2],[12,8,12,6],[12,9,12,7,"_head"],[12,14,12,12],[12,17,12,21],[12,18,12,22],[13,4,13,2],[13,8,13,6],[13,9,13,7,"_tail"],[13,14,13,12],[13,17,13,21],[13,18,13,22],[14,4,14,2],[14,8,14,6],[14,9,14,7,"length"],[14,15,14,13],[14,18,14,21],[14,19,14,22],[15,2,15,0],[15,3,15,1],[16,2,17,0,"RingBuffer"],[16,12,17,10],[16,13,17,11,"prototype"],[16,22,17,20],[16,23,17,21,"push"],[16,27,17,25],[16,30,17,28],[16,40,17,37,"value"],[16,45,17,42],[16,47,17,44],[17,4,18,2],[17,8,18,6,"expandBuffer"],[17,20,18,18],[17,23,18,21],[17,28,18,26],[18,6,19,6,"expandRing"],[18,16,19,16],[18,19,19,21],[18,24,19,26],[19,4,21,2],[19,8,21,6],[19,12,21,10],[19,13,21,11,"_ringSize"],[19,22,21,20],[19,25,21,23],[19,29,21,27],[19,30,21,28,"_bufferSize"],[19,41,21,39],[19,43,21,41],[20,6,22,4,"expandBuffer"],[20,18,22,16],[20,21,22,20],[20,25,22,24],[20,26,22,25,"_tail"],[20,31,22,30],[20,36,22,35],[20,37,22,37],[21,4,23,2],[21,5,23,3],[21,11,23,9],[21,15,23,13],[21,19,23,17],[21,20,23,18,"_ringOffset"],[21,31,23,29],[21,36,23,34],[21,40,23,38],[21,41,23,39,"_ringSize"],[21,50,23,48],[21,52,23,50],[22,6,24,4,"expandBuffer"],[22,18,24,16],[22,21,24,19],[22,25,24,23],[23,6,25,4,"expandRing"],[23,16,25,14],[23,19,25,20],[23,23,25,24],[23,24,25,25,"_tail"],[23,29,25,30],[23,34,25,35],[23,35,25,37],[24,4,26,2],[25,4,28,2],[25,8,28,6,"expandBuffer"],[25,20,28,18],[25,22,28,20],[26,6,29,4],[26,10,29,8],[26,11,29,9,"_tail"],[26,16,29,14],[26,19,29,23],[26,23,29,27],[26,24,29,28,"_bufferSize"],[26,35,29,39],[27,6,30,4],[27,10,30,8],[27,11,30,9,"_buffer"],[27,18,30,16],[27,21,30,23],[27,25,30,27],[27,26,30,28,"_buffer"],[27,33,30,35],[27,34,30,36,"concat"],[27,40,30,42],[27,41,30,43],[27,45,30,47,"Array"],[27,50,30,52],[27,51,30,53],[27,55,30,57],[27,56,30,58,"_bufferSize"],[27,67,30,69],[27,68,30,70],[27,69,30,71],[28,6,31,4],[28,10,31,8],[28,11,31,9,"_bufferSize"],[28,22,31,20],[28,25,31,23],[28,29,31,27],[28,30,31,28,"_buffer"],[28,37,31,35],[28,38,31,36,"length"],[28,44,31,42],[29,6,33,4],[29,10,33,8,"expandRing"],[29,20,33,18],[29,22,34,6],[29,26,34,10],[29,27,34,11,"_ringSize"],[29,36,34,20],[29,39,34,23],[29,43,34,27],[29,44,34,28,"_bufferSize"],[29,55,34,39],[30,4,35,2],[31,4,37,2],[31,8,37,6],[31,9,37,7,"_buffer"],[31,16,37,14],[31,17,37,15],[31,21,37,19],[31,22,37,20,"_tail"],[31,27,37,25],[31,28,37,26],[31,31,37,29,"value"],[31,36,37,34],[32,4,38,2],[32,8,38,6],[32,9,38,7,"length"],[32,15,38,13],[32,19,38,17],[32,20,38,18],[33,4,39,2],[33,8,39,6],[33,12,39,10],[33,13,39,11,"_tail"],[33,18,39,16],[33,21,39,19],[33,25,39,23],[33,26,39,24,"_ringSize"],[33,35,39,33],[33,37,39,35],[33,41,39,39],[33,42,39,40,"_ringOffset"],[33,53,39,51],[33,57,39,55],[33,58,39,56],[34,4,40,2],[34,8,40,6],[34,9,40,7,"_tail"],[34,14,40,12],[34,17,40,15],[34,18,40,16],[34,22,40,20],[34,23,40,21,"_tail"],[34,28,40,26],[34,31,40,29],[34,32,40,30],[34,36,40,34],[34,40,40,38],[34,41,40,39,"_bufferSize"],[34,52,40,50],[35,2,41,0],[35,3,41,1],[36,2,43,0,"RingBuffer"],[36,12,43,10],[36,13,43,11,"prototype"],[36,22,43,20],[36,23,43,21,"peek"],[36,27,43,25],[36,30,43,28],[36,42,43,39],[37,4,44,2],[37,8,44,6],[37,12,44,10],[37,13,44,11,"length"],[37,19,44,17],[37,24,44,22],[37,25,44,23],[37,27,44,25],[37,34,44,32],[37,39,44,37],[37,40,44,38],[38,4,45,2],[38,11,45,9],[38,15,45,13],[38,16,45,14,"_buffer"],[38,23,45,21],[38,24,45,22],[38,28,45,26],[38,29,45,27,"_head"],[38,34,45,32],[38,35,45,33],[39,2,46,0],[39,3,46,1],[40,2,48,0,"RingBuffer"],[40,12,48,10],[40,13,48,11,"prototype"],[40,22,48,20],[40,23,48,21,"shift"],[40,28,48,26],[40,31,48,29],[40,43,48,40],[41,4,49,2],[41,8,49,6],[41,12,49,10],[41,13,49,11,"length"],[41,19,49,17],[41,24,49,22],[41,25,49,23],[41,27,49,25],[41,34,49,32],[41,39,49,37],[41,40,49,38],[42,4,51,2],[42,8,51,6,"value"],[42,13,51,11],[42,16,51,14],[42,20,51,18],[42,21,51,19,"_buffer"],[42,28,51,26],[42,29,51,27],[42,33,51,31],[42,34,51,32,"_head"],[42,39,51,37],[42,40,51,38],[43,4,52,2],[43,8,52,6],[43,9,52,7,"_buffer"],[43,16,52,14],[43,17,52,15],[43,21,52,19],[43,22,52,20,"_head"],[43,27,52,25],[43,28,52,26],[43,31,52,29],[43,36,52,34],[43,37,52,35],[44,4,53,2],[44,8,53,6],[44,9,53,7,"length"],[44,15,53,13],[44,19,53,17],[44,20,53,18],[45,4,54,2],[45,8,54,6],[45,9,54,7,"_ringOffset"],[45,20,54,18],[45,24,54,22],[45,25,54,23],[46,4,56,2],[46,8,56,6],[46,12,56,10],[46,13,56,11,"_ringOffset"],[46,24,56,22],[46,29,56,27],[46,30,56,28],[46,34,56,32],[46,38,56,36],[46,39,56,37,"length"],[46,45,56,43],[46,48,56,46],[46,49,56,47],[46,51,56,49],[47,6,57,4],[47,10,57,8],[47,11,57,9,"_head"],[47,16,57,14],[47,19,57,23],[47,23,57,27],[47,24,57,28,"_ringSize"],[47,33,57,37],[48,6,58,4],[48,10,58,8],[48,11,58,9,"_ringOffset"],[48,22,58,20],[48,25,58,23],[48,29,58,27],[48,30,58,28,"length"],[48,36,58,34],[49,6,59,4],[49,10,59,8],[49,11,59,9,"_ringSize"],[49,20,59,18],[49,23,59,23],[49,27,59,27],[49,28,59,28,"_bufferSize"],[49,39,59,39],[50,4,60,2],[50,5,60,3],[50,11,60,9],[51,6,61,4],[51,10,61,8],[51,11,61,9,"_head"],[51,16,61,14],[51,19,61,17],[51,20,61,18],[51,24,61,22],[51,25,61,23,"_head"],[51,30,61,28],[51,33,61,31],[51,34,61,32],[51,38,61,36],[51,42,61,40],[51,43,61,41,"_ringSize"],[51,52,61,50],[52,4,62,2],[53,4,63,2],[53,11,63,9,"value"],[53,16,63,14],[54,2,64,0],[54,3,64,1],[55,2,66,0,"module"],[55,8,66,6],[55,9,66,7,"exports"],[55,16,66,14],[55,19,66,17,"RingBuffer"],[55,29,66,27],[56,0,66,28],[56,3]],"functionMap":{"names":["<global>","RingBuffer","RingBuffer.prototype.clear","RingBuffer.prototype.push","RingBuffer.prototype.peek","RingBuffer.prototype.shift"],"mappings":"AAA;iBCE;CDG;6BEE;CFO;4BGE;CHwB;4BIE;CJG;6BKE;CLgB"}},"type":"js/module"}]}