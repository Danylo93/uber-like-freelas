{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"]}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"]}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":128},"end":{"line":3,"column":45,"index":173}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"]}},{"name":"./AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":174},"end":{"line":4,"column":40,"index":214}}],"key":"YmpzODa+dVz64UAAYTI+RwJeEt0=","exportNames":["*"]}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useChat = exports.ChatProvider = void 0;\n  var _react = _interopRequireWildcard(require(_dependencyMap[1], \"react\"));\n  var _Alert = _interopRequireDefault(require(_dependencyMap[2], \"react-native-web/dist/exports/Alert\"));\n  var _api = require(_dependencyMap[3], \"../services/api\");\n  var _AuthContext = require(_dependencyMap[4], \"./AuthContext\");\n  var _jsxDevRuntime = require(_dependencyMap[5], \"react/jsx-dev-runtime\");\n  var _jsxFileName = \"/app/frontend/src/contexts/ChatContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) \"default\" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }\n  const ChatContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const ChatProvider = ({\n    children\n  }) => {\n    _s();\n    const {\n      user\n    } = (0, _AuthContext.useAuth)();\n    const [chats, setChats] = (0, _react.useState)([]);\n    const [messages, setMessages] = (0, _react.useState)({});\n    const [isLoading, setIsLoading] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      if (user) {\n        refreshChats();\n      }\n    }, [user]);\n    const refreshChats = async () => {\n      if (!user) return;\n      try {\n        setIsLoading(true);\n\n        // Get chats from backend\n        const response = await _api.apiService.get('/chats');\n        const backendChats = response.data || [];\n\n        // Transform backend data to match our interface\n        const transformedChats = backendChats.map(chat => ({\n          id: chat.id,\n          participants: chat.participants,\n          serviceRequestId: chat.service_request_id,\n          unreadCount: 0,\n          // TODO: Calculate unread count\n          participantNames: Object.assign({\n            [user.id]: user.name\n          }, Object.fromEntries(chat.participants.filter(id => id !== user.id).map(id => [id, chat.participant_name || 'Usuário']))),\n          lastMessage: chat.last_message ? {\n            id: chat.last_message.id,\n            senderId: chat.last_message.sender_id,\n            receiverId: chat.last_message.receiver_id || '',\n            content: chat.last_message.content,\n            timestamp: new Date(chat.last_message.created_at),\n            read: !!chat.last_message.read_at,\n            type: chat.last_message.message_type,\n            serviceRequestId: chat.last_message.service_request_id\n          } : undefined\n        }));\n        setChats(transformedChats);\n      } catch (error) {\n        console.error('Error refreshing chats:', error);\n        // Fallback to empty array on error\n        setChats([]);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const loadMessages = async chatId => {\n      try {\n        const response = await _api.apiService.get(`/chats/${chatId}/messages`);\n        const backendMessages = response.data || [];\n\n        // Transform backend messages to match our interface\n        const transformedMessages = backendMessages.map(msg => ({\n          id: msg.id,\n          senderId: msg.sender_id,\n          receiverId: msg.receiver_id || '',\n          content: msg.content,\n          timestamp: new Date(msg.created_at),\n          read: !!msg.read_at,\n          type: msg.message_type,\n          serviceRequestId: msg.service_request_id\n        }));\n        setMessages(prev => Object.assign({}, prev, {\n          [chatId]: transformedMessages\n        }));\n      } catch (error) {\n        console.error('Error loading messages:', error);\n        // Set empty array on error\n        setMessages(prev => Object.assign({}, prev, {\n          [chatId]: []\n        }));\n      }\n    };\n    const sendMessage = async (chatId, content, type = 'text') => {\n      if (!user) return;\n      try {\n        setIsLoading(true);\n        const chat = chats.find(c => c.id === chatId);\n        if (!chat) return;\n        const receiverId = chat.participants.find(p => p !== user.id) || '';\n        const newMessage = {\n          id: `msg_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n          senderId: user.id,\n          receiverId,\n          content,\n          timestamp: new Date(),\n          read: false,\n          type,\n          serviceRequestId: chat.serviceRequestId\n        };\n\n        // Update local messages immediately (optimistic update)\n        setMessages(prev => Object.assign({}, prev, {\n          [chatId]: [...(prev[chatId] || []), newMessage]\n        }));\n\n        // Update chat last message\n        setChats(prev => prev.map(c => c.id === chatId ? Object.assign({}, c, {\n          lastMessage: newMessage\n        }) : c));\n\n        // Send message to backend\n        await _api.apiService.post(`/chats/${chatId}/messages`, {\n          content,\n          message_type: type,\n          service_request_id: chat.serviceRequestId\n        });\n        console.log('Message sent successfully:', newMessage);\n      } catch (error) {\n        console.error('Error sending message:', error);\n        _Alert.default.alert('Erro', 'Não foi possível enviar a mensagem');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const markAsRead = async chatId => {\n      if (!user) return;\n      try {\n        // Mark all messages as read\n        setMessages(prev => Object.assign({}, prev, {\n          [chatId]: prev[chatId]?.map(msg => msg.receiverId === user.id ? Object.assign({}, msg, {\n            read: true\n          }) : msg) || []\n        }));\n\n        // Update unread count\n        setChats(prev => prev.map(chat => chat.id === chatId ? Object.assign({}, chat, {\n          unreadCount: 0\n        }) : chat));\n\n        // Mark messages as read in backend\n        await _api.apiService.put(`/chats/${chatId}/read`);\n      } catch (error) {\n        console.error('Error marking as read:', error);\n      }\n    };\n    const createChat = async (participantId, participantName, serviceRequestId) => {\n      if (!user) throw new Error('User not authenticated');\n      try {\n        setIsLoading(true);\n        const chatId = serviceRequestId ? `service_${serviceRequestId}` : `chat_${Date.now()}`;\n        const newChat = {\n          id: chatId,\n          participants: [user.id, participantId],\n          unreadCount: 0,\n          serviceRequestId,\n          participantNames: {\n            [user.id]: user.name,\n            [participantId]: participantName\n          }\n        };\n        setChats(prev => [...prev, newChat]);\n        setMessages(prev => Object.assign({}, prev, {\n          [chatId]: []\n        }));\n\n        // Create chat in backend\n        await _api.apiService.post('/chats', {\n          participant_id: participantId,\n          service_request_id: serviceRequestId\n        });\n        return chatId;\n      } catch (error) {\n        console.error('Error creating chat:', error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const value = {\n      chats,\n      messages,\n      sendMessage,\n      markAsRead,\n      createChat,\n      refreshChats,\n      loadMessages,\n      isLoading\n    };\n    return /*#__PURE__*/(0, _jsxDevRuntime.jsxDEV)(ChatContext.Provider, {\n      value: value,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 5\n    }, this);\n  };\n  exports.ChatProvider = ChatProvider;\n  _s(ChatProvider, \"QDeg8X/QEefoabplXs4cUtGjizs=\", false, function () {\n    return [_AuthContext.useAuth];\n  });\n  _c = ChatProvider;\n  const useChat = () => {\n    _s2();\n    const context = (0, _react.useContext)(ChatContext);\n    if (!context) {\n      throw new Error('useChat must be used within a ChatProvider');\n    }\n    return context;\n  };\n  exports.useChat = useChat;\n  _s2(useChat, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"ChatProvider\");\n});","lineCount":230,"map":[[7,2,1,0],[7,6,1,0,"_react"],[7,12,1,0],[7,15,1,0,"_interopRequireWildcard"],[7,38,1,0],[7,39,1,0,"require"],[7,46,1,0],[7,47,1,0,"_dependencyMap"],[7,61,1,0],[8,2,1,89],[8,6,1,89,"_Alert"],[8,12,1,89],[8,15,1,89,"_interopRequireDefault"],[8,37,1,89],[8,38,1,89,"require"],[8,45,1,89],[8,46,1,89,"_dependencyMap"],[8,60,1,89],[9,2,3,0],[9,6,3,0,"_api"],[9,10,3,0],[9,13,3,0,"require"],[9,20,3,0],[9,21,3,0,"_dependencyMap"],[9,35,3,0],[10,2,4,0],[10,6,4,0,"_AuthContext"],[10,18,4,0],[10,21,4,0,"require"],[10,28,4,0],[10,29,4,0,"_dependencyMap"],[10,43,4,0],[11,2,4,40],[11,6,4,40,"_jsxDevRuntime"],[11,20,4,40],[11,23,4,40,"require"],[11,30,4,40],[11,31,4,40,"_dependencyMap"],[11,45,4,40],[12,2,4,40],[12,6,4,40,"_jsxFileName"],[12,18,4,40],[13,4,4,40,"_s"],[13,6,4,40],[13,9,4,40,"$RefreshSig$"],[13,21,4,40],[14,4,4,40,"_s2"],[14,7,4,40],[14,10,4,40,"$RefreshSig$"],[14,22,4,40],[15,2,4,40],[15,11,4,40,"_interopRequireWildcard"],[15,35,4,40,"e"],[15,36,4,40],[15,38,4,40,"t"],[15,39,4,40],[15,68,4,40,"WeakMap"],[15,75,4,40],[15,81,4,40,"r"],[15,82,4,40],[15,89,4,40,"WeakMap"],[15,96,4,40],[15,100,4,40,"n"],[15,101,4,40],[15,108,4,40,"WeakMap"],[15,115,4,40],[15,127,4,40,"_interopRequireWildcard"],[15,150,4,40],[15,162,4,40,"_interopRequireWildcard"],[15,163,4,40,"e"],[15,164,4,40],[15,166,4,40,"t"],[15,167,4,40],[15,176,4,40,"t"],[15,177,4,40],[15,181,4,40,"e"],[15,182,4,40],[15,186,4,40,"e"],[15,187,4,40],[15,188,4,40,"__esModule"],[15,198,4,40],[15,207,4,40,"e"],[15,208,4,40],[15,214,4,40,"o"],[15,215,4,40],[15,217,4,40,"i"],[15,218,4,40],[15,220,4,40,"f"],[15,221,4,40],[15,226,4,40,"__proto__"],[15,235,4,40],[15,243,4,40,"default"],[15,250,4,40],[15,252,4,40,"e"],[15,253,4,40],[15,270,4,40,"e"],[15,271,4,40],[15,294,4,40,"e"],[15,295,4,40],[15,320,4,40,"e"],[15,321,4,40],[15,330,4,40,"f"],[15,331,4,40],[15,337,4,40,"o"],[15,338,4,40],[15,341,4,40,"t"],[15,342,4,40],[15,345,4,40,"n"],[15,346,4,40],[15,349,4,40,"r"],[15,350,4,40],[15,358,4,40,"o"],[15,359,4,40],[15,360,4,40,"has"],[15,363,4,40],[15,364,4,40,"e"],[15,365,4,40],[15,375,4,40,"o"],[15,376,4,40],[15,377,4,40,"get"],[15,380,4,40],[15,381,4,40,"e"],[15,382,4,40],[15,385,4,40,"o"],[15,386,4,40],[15,387,4,40,"set"],[15,390,4,40],[15,391,4,40,"e"],[15,392,4,40],[15,394,4,40,"f"],[15,395,4,40],[15,411,4,40,"t"],[15,412,4,40],[15,416,4,40,"e"],[15,417,4,40],[15,433,4,40,"t"],[15,434,4,40],[15,441,4,40,"hasOwnProperty"],[15,455,4,40],[15,456,4,40,"call"],[15,460,4,40],[15,461,4,40,"e"],[15,462,4,40],[15,464,4,40,"t"],[15,465,4,40],[15,472,4,40,"i"],[15,473,4,40],[15,477,4,40,"o"],[15,478,4,40],[15,481,4,40,"Object"],[15,487,4,40],[15,488,4,40,"defineProperty"],[15,502,4,40],[15,507,4,40,"Object"],[15,513,4,40],[15,514,4,40,"getOwnPropertyDescriptor"],[15,538,4,40],[15,539,4,40,"e"],[15,540,4,40],[15,542,4,40,"t"],[15,543,4,40],[15,550,4,40,"i"],[15,551,4,40],[15,552,4,40,"get"],[15,555,4,40],[15,559,4,40,"i"],[15,560,4,40],[15,561,4,40,"set"],[15,564,4,40],[15,568,4,40,"o"],[15,569,4,40],[15,570,4,40,"f"],[15,571,4,40],[15,573,4,40,"t"],[15,574,4,40],[15,576,4,40,"i"],[15,577,4,40],[15,581,4,40,"f"],[15,582,4,40],[15,583,4,40,"t"],[15,584,4,40],[15,588,4,40,"e"],[15,589,4,40],[15,590,4,40,"t"],[15,591,4,40],[15,602,4,40,"f"],[15,603,4,40],[15,608,4,40,"e"],[15,609,4,40],[15,611,4,40,"t"],[15,612,4,40],[16,2,37,0],[16,8,37,6,"ChatContext"],[16,19,37,17],[16,35,37,20],[16,39,37,20,"createContext"],[16,59,37,33],[16,61,37,63,"undefined"],[16,70,37,72],[16,71,37,73],[17,2,43,7],[17,8,43,13,"ChatProvider"],[17,20,43,54],[17,23,43,57,"ChatProvider"],[17,24,43,58],[18,4,43,60,"children"],[19,2,43,69],[19,3,43,70],[19,8,43,75],[20,4,43,75,"_s"],[20,6,43,75],[21,4,44,2],[21,10,44,8],[22,6,44,10,"user"],[23,4,44,15],[23,5,44,16],[23,8,44,19],[23,12,44,19,"useAuth"],[23,32,44,26],[23,34,44,27],[23,35,44,28],[24,4,45,2],[24,10,45,8],[24,11,45,9,"chats"],[24,16,45,14],[24,18,45,16,"setChats"],[24,26,45,24],[24,27,45,25],[24,30,45,28],[24,34,45,28,"useState"],[24,49,45,36],[24,51,45,45],[24,53,45,47],[24,54,45,48],[25,4,46,2],[25,10,46,8],[25,11,46,9,"messages"],[25,19,46,17],[25,21,46,19,"setMessages"],[25,32,46,30],[25,33,46,31],[25,36,46,34],[25,40,46,34,"useState"],[25,55,46,42],[25,57,46,70],[25,58,46,71],[25,59,46,72],[25,60,46,73],[26,4,47,2],[26,10,47,8],[26,11,47,9,"isLoading"],[26,20,47,18],[26,22,47,20,"setIsLoading"],[26,34,47,32],[26,35,47,33],[26,38,47,36],[26,42,47,36,"useState"],[26,57,47,44],[26,59,47,45],[26,64,47,50],[26,65,47,51],[27,4,49,2],[27,8,49,2,"useEffect"],[27,24,49,11],[27,26,49,12],[27,32,49,18],[28,6,50,4],[28,10,50,8,"user"],[28,14,50,12],[28,16,50,14],[29,8,51,6,"refreshChats"],[29,20,51,18],[29,21,51,19],[29,22,51,20],[30,6,52,4],[31,4,53,2],[31,5,53,3],[31,7,53,5],[31,8,53,6,"user"],[31,12,53,10],[31,13,53,11],[31,14,53,12],[32,4,55,2],[32,10,55,8,"refreshChats"],[32,22,55,20],[32,25,55,23],[32,31,55,23,"refreshChats"],[32,32,55,23],[32,37,55,35],[33,6,56,4],[33,10,56,8],[33,11,56,9,"user"],[33,15,56,13],[33,17,56,15],[34,6,58,4],[34,10,58,8],[35,8,59,6,"setIsLoading"],[35,20,59,18],[35,21,59,19],[35,25,59,23],[35,26,59,24],[37,8,61,6],[38,8,62,6],[38,14,62,12,"response"],[38,22,62,20],[38,25,62,23],[38,31,62,29,"apiService"],[38,46,62,39],[38,47,62,40,"get"],[38,50,62,43],[38,51,62,44],[38,59,62,52],[38,60,62,53],[39,8,63,6],[39,14,63,12,"backendChats"],[39,26,63,24],[39,29,63,27,"response"],[39,37,63,35],[39,38,63,36,"data"],[39,42,63,40],[39,46,63,44],[39,48,63,46],[41,8,65,6],[42,8,66,6],[42,14,66,12,"transformedChats"],[42,30,66,36],[42,33,66,39,"backendChats"],[42,45,66,51],[42,46,66,52,"map"],[42,49,66,55],[42,50,66,57,"chat"],[42,54,66,66],[42,59,66,72],[43,10,67,8,"id"],[43,12,67,10],[43,14,67,12,"chat"],[43,18,67,16],[43,19,67,17,"id"],[43,21,67,19],[44,10,68,8,"participants"],[44,22,68,20],[44,24,68,22,"chat"],[44,28,68,26],[44,29,68,27,"participants"],[44,41,68,39],[45,10,69,8,"serviceRequestId"],[45,26,69,24],[45,28,69,26,"chat"],[45,32,69,30],[45,33,69,31,"service_request_id"],[45,51,69,49],[46,10,70,8,"unreadCount"],[46,21,70,19],[46,23,70,21],[46,24,70,22],[47,10,70,24],[48,10,71,8,"participantNames"],[48,26,71,24],[48,28,71,24,"Object"],[48,34,71,24],[48,35,71,24,"assign"],[48,41,71,24],[49,12,72,10],[49,13,72,11,"user"],[49,17,72,15],[49,18,72,16,"id"],[49,20,72,18],[49,23,72,21,"user"],[49,27,72,25],[49,28,72,26,"name"],[50,10,72,30],[50,13,74,13,"Object"],[50,19,74,19],[50,20,74,20,"fromEntries"],[50,31,74,31],[50,32,75,12,"chat"],[50,36,75,16],[50,37,75,17,"participants"],[50,49,75,29],[50,50,76,15,"filter"],[50,56,76,21],[50,57,76,23,"id"],[50,59,76,33],[50,63,76,38,"id"],[50,65,76,40],[50,70,76,45,"user"],[50,74,76,49],[50,75,76,50,"id"],[50,77,76,52],[50,78,76,53],[50,79,77,15,"map"],[50,82,77,18],[50,83,77,20,"id"],[50,85,77,30],[50,89,77,35],[50,90,77,36,"id"],[50,92,77,38],[50,94,77,40,"chat"],[50,98,77,44],[50,99,77,45,"participant_name"],[50,115,77,61],[50,119,77,65],[50,128,77,74],[50,129,77,75],[50,130,78,10],[50,131,78,11],[50,132,79,9],[51,10,80,8,"lastMessage"],[51,21,80,19],[51,23,80,21,"chat"],[51,27,80,25],[51,28,80,26,"last_message"],[51,40,80,38],[51,43,80,41],[52,12,81,10,"id"],[52,14,81,12],[52,16,81,14,"chat"],[52,20,81,18],[52,21,81,19,"last_message"],[52,33,81,31],[52,34,81,32,"id"],[52,36,81,34],[53,12,82,10,"senderId"],[53,20,82,18],[53,22,82,20,"chat"],[53,26,82,24],[53,27,82,25,"last_message"],[53,39,82,37],[53,40,82,38,"sender_id"],[53,49,82,47],[54,12,83,10,"receiverId"],[54,22,83,20],[54,24,83,22,"chat"],[54,28,83,26],[54,29,83,27,"last_message"],[54,41,83,39],[54,42,83,40,"receiver_id"],[54,53,83,51],[54,57,83,55],[54,59,83,57],[55,12,84,10,"content"],[55,19,84,17],[55,21,84,19,"chat"],[55,25,84,23],[55,26,84,24,"last_message"],[55,38,84,36],[55,39,84,37,"content"],[55,46,84,44],[56,12,85,10,"timestamp"],[56,21,85,19],[56,23,85,21],[56,27,85,25,"Date"],[56,31,85,29],[56,32,85,30,"chat"],[56,36,85,34],[56,37,85,35,"last_message"],[56,49,85,47],[56,50,85,48,"created_at"],[56,60,85,58],[56,61,85,59],[57,12,86,10,"read"],[57,16,86,14],[57,18,86,16],[57,19,86,17],[57,20,86,18,"chat"],[57,24,86,22],[57,25,86,23,"last_message"],[57,37,86,35],[57,38,86,36,"read_at"],[57,45,86,43],[58,12,87,10,"type"],[58,16,87,14],[58,18,87,16,"chat"],[58,22,87,20],[58,23,87,21,"last_message"],[58,35,87,33],[58,36,87,34,"message_type"],[58,48,87,79],[59,12,88,10,"serviceRequestId"],[59,28,88,26],[59,30,88,28,"chat"],[59,34,88,32],[59,35,88,33,"last_message"],[59,47,88,45],[59,48,88,46,"service_request_id"],[60,10,89,8],[60,11,89,9],[60,14,89,12,"undefined"],[61,8,90,6],[61,9,90,7],[61,10,90,8],[61,11,90,9],[62,8,92,6,"setChats"],[62,16,92,14],[62,17,92,15,"transformedChats"],[62,33,92,31],[62,34,92,32],[63,6,94,4],[63,7,94,5],[63,8,94,6],[63,15,94,13,"error"],[63,20,94,18],[63,22,94,20],[64,8,95,6,"console"],[64,15,95,13],[64,16,95,14,"error"],[64,21,95,19],[64,22,95,20],[64,47,95,45],[64,49,95,47,"error"],[64,54,95,52],[64,55,95,53],[65,8,96,6],[66,8,97,6,"setChats"],[66,16,97,14],[66,17,97,15],[66,19,97,17],[66,20,97,18],[67,6,98,4],[67,7,98,5],[67,16,98,14],[68,8,99,6,"setIsLoading"],[68,20,99,18],[68,21,99,19],[68,26,99,24],[68,27,99,25],[69,6,100,4],[70,4,101,2],[70,5,101,3],[71,4,103,2],[71,10,103,8,"loadMessages"],[71,22,103,20],[71,25,103,23],[71,31,103,30,"chatId"],[71,37,103,44],[71,41,103,49],[72,6,104,4],[72,10,104,8],[73,8,105,6],[73,14,105,12,"response"],[73,22,105,20],[73,25,105,23],[73,31,105,29,"apiService"],[73,46,105,39],[73,47,105,40,"get"],[73,50,105,43],[73,51,105,44],[73,61,105,54,"chatId"],[73,67,105,60],[73,78,105,71],[73,79,105,72],[74,8,106,6],[74,14,106,12,"backendMessages"],[74,29,106,27],[74,32,106,30,"response"],[74,40,106,38],[74,41,106,39,"data"],[74,45,106,43],[74,49,106,47],[74,51,106,49],[76,8,108,6],[77,8,109,6],[77,14,109,12,"transformedMessages"],[77,33,109,42],[77,36,109,45,"backendMessages"],[77,51,109,60],[77,52,109,61,"map"],[77,55,109,64],[77,56,109,66,"msg"],[77,59,109,74],[77,64,109,80],[78,10,110,8,"id"],[78,12,110,10],[78,14,110,12,"msg"],[78,17,110,15],[78,18,110,16,"id"],[78,20,110,18],[79,10,111,8,"senderId"],[79,18,111,16],[79,20,111,18,"msg"],[79,23,111,21],[79,24,111,22,"sender_id"],[79,33,111,31],[80,10,112,8,"receiverId"],[80,20,112,18],[80,22,112,20,"msg"],[80,25,112,23],[80,26,112,24,"receiver_id"],[80,37,112,35],[80,41,112,39],[80,43,112,41],[81,10,113,8,"content"],[81,17,113,15],[81,19,113,17,"msg"],[81,22,113,20],[81,23,113,21,"content"],[81,30,113,28],[82,10,114,8,"timestamp"],[82,19,114,17],[82,21,114,19],[82,25,114,23,"Date"],[82,29,114,27],[82,30,114,28,"msg"],[82,33,114,31],[82,34,114,32,"created_at"],[82,44,114,42],[82,45,114,43],[83,10,115,8,"read"],[83,14,115,12],[83,16,115,14],[83,17,115,15],[83,18,115,16,"msg"],[83,21,115,19],[83,22,115,20,"read_at"],[83,29,115,27],[84,10,116,8,"type"],[84,14,116,12],[84,16,116,14,"msg"],[84,19,116,17],[84,20,116,18,"message_type"],[84,32,116,63],[85,10,117,8,"serviceRequestId"],[85,26,117,24],[85,28,117,26,"msg"],[85,31,117,29],[85,32,117,30,"service_request_id"],[86,8,118,6],[86,9,118,7],[86,10,118,8],[86,11,118,9],[87,8,120,6,"setMessages"],[87,19,120,17],[87,20,120,18,"prev"],[87,24,120,22],[87,28,120,22,"Object"],[87,34,120,22],[87,35,120,22,"assign"],[87,41,120,22],[87,46,121,11,"prev"],[87,50,121,15],[88,10,122,8],[88,11,122,9,"chatId"],[88,17,122,15],[88,20,122,18,"transformedMessages"],[89,8,122,37],[89,10,123,8],[89,11,123,9],[90,6,124,4],[90,7,124,5],[90,8,124,6],[90,15,124,13,"error"],[90,20,124,18],[90,22,124,20],[91,8,125,6,"console"],[91,15,125,13],[91,16,125,14,"error"],[91,21,125,19],[91,22,125,20],[91,47,125,45],[91,49,125,47,"error"],[91,54,125,52],[91,55,125,53],[92,8,126,6],[93,8,127,6,"setMessages"],[93,19,127,17],[93,20,127,18,"prev"],[93,24,127,22],[93,28,127,22,"Object"],[93,34,127,22],[93,35,127,22,"assign"],[93,41,127,22],[93,46,128,11,"prev"],[93,50,128,15],[94,10,129,8],[94,11,129,9,"chatId"],[94,17,129,15],[94,20,129,18],[95,8,129,20],[95,10,130,8],[95,11,130,9],[96,6,131,4],[97,4,132,2],[97,5,132,3],[98,4,134,2],[98,10,134,8,"sendMessage"],[98,21,134,19],[98,24,134,22],[98,30,134,22,"sendMessage"],[98,31,134,29,"chatId"],[98,37,134,43],[98,39,134,45,"content"],[98,46,134,60],[98,48,134,62,"type"],[98,52,134,97],[98,55,134,100],[98,61,134,106],[98,66,134,111],[99,6,135,4],[99,10,135,8],[99,11,135,9,"user"],[99,15,135,13],[99,17,135,15],[100,6,137,4],[100,10,137,8],[101,8,138,6,"setIsLoading"],[101,20,138,18],[101,21,138,19],[101,25,138,23],[101,26,138,24],[102,8,140,6],[102,14,140,12,"chat"],[102,18,140,16],[102,21,140,19,"chats"],[102,26,140,24],[102,27,140,25,"find"],[102,31,140,29],[102,32,140,30,"c"],[102,33,140,31],[102,37,140,35,"c"],[102,38,140,36],[102,39,140,37,"id"],[102,41,140,39],[102,46,140,44,"chatId"],[102,52,140,50],[102,53,140,51],[103,8,141,6],[103,12,141,10],[103,13,141,11,"chat"],[103,17,141,15],[103,19,141,17],[104,8,143,6],[104,14,143,12,"receiverId"],[104,24,143,22],[104,27,143,25,"chat"],[104,31,143,29],[104,32,143,30,"participants"],[104,44,143,42],[104,45,143,43,"find"],[104,49,143,47],[104,50,143,48,"p"],[104,51,143,49],[104,55,143,53,"p"],[104,56,143,54],[104,61,143,59,"user"],[104,65,143,63],[104,66,143,64,"id"],[104,68,143,66],[104,69,143,67],[104,73,143,71],[104,75,143,73],[105,8,145,6],[105,14,145,12,"newMessage"],[105,24,145,31],[105,27,145,34],[106,10,146,8,"id"],[106,12,146,10],[106,14,146,12],[106,21,146,19,"Date"],[106,25,146,23],[106,26,146,24,"now"],[106,29,146,27],[106,30,146,28],[106,31,146,29],[106,35,146,33,"Math"],[106,39,146,37],[106,40,146,38,"random"],[106,46,146,44],[106,47,146,45],[106,48,146,46],[106,49,146,47,"toString"],[106,57,146,55],[106,58,146,56],[106,60,146,58],[106,61,146,59],[106,62,146,60,"substr"],[106,68,146,66],[106,69,146,67],[106,70,146,68],[106,72,146,70],[106,73,146,71],[106,74,146,72],[106,76,146,74],[107,10,147,8,"senderId"],[107,18,147,16],[107,20,147,18,"user"],[107,24,147,22],[107,25,147,23,"id"],[107,27,147,25],[108,10,148,8,"receiverId"],[108,20,148,18],[109,10,149,8,"content"],[109,17,149,15],[110,10,150,8,"timestamp"],[110,19,150,17],[110,21,150,19],[110,25,150,23,"Date"],[110,29,150,27],[110,30,150,28],[110,31,150,29],[111,10,151,8,"read"],[111,14,151,12],[111,16,151,14],[111,21,151,19],[112,10,152,8,"type"],[112,14,152,12],[113,10,153,8,"serviceRequestId"],[113,26,153,24],[113,28,153,26,"chat"],[113,32,153,30],[113,33,153,31,"serviceRequestId"],[114,8,154,6],[114,9,154,7],[116,8,156,6],[117,8,157,6,"setMessages"],[117,19,157,17],[117,20,157,18,"prev"],[117,24,157,22],[117,28,157,22,"Object"],[117,34,157,22],[117,35,157,22,"assign"],[117,41,157,22],[117,46,158,11,"prev"],[117,50,158,15],[118,10,159,8],[118,11,159,9,"chatId"],[118,17,159,15],[118,20,159,18],[118,21,159,19],[118,25,159,23,"prev"],[118,29,159,27],[118,30,159,28,"chatId"],[118,36,159,34],[118,37,159,35],[118,41,159,39],[118,43,159,41],[118,44,159,42],[118,46,159,44,"newMessage"],[118,56,159,54],[119,8,159,55],[119,10,160,8],[119,11,160,9],[121,8,162,6],[122,8,163,6,"setChats"],[122,16,163,14],[122,17,163,15,"prev"],[122,21,163,19],[122,25,164,8,"prev"],[122,29,164,12],[122,30,164,13,"map"],[122,33,164,16],[122,34,164,17,"c"],[122,35,164,18],[122,39,165,10,"c"],[122,40,165,11],[122,41,165,12,"id"],[122,43,165,14],[122,48,165,19,"chatId"],[122,54,165,25],[122,57,165,25,"Object"],[122,63,165,25],[122,64,165,25,"assign"],[122,70,165,25],[122,75,166,19,"c"],[122,76,166,20],[123,10,166,22,"lastMessage"],[123,21,166,33],[123,23,166,35,"newMessage"],[124,8,166,45],[124,13,167,14,"c"],[124,14,168,8],[124,15,169,6],[124,16,169,7],[126,8,171,6],[127,8,172,6],[127,14,172,12,"apiService"],[127,29,172,22],[127,30,172,23,"post"],[127,34,172,27],[127,35,172,28],[127,45,172,38,"chatId"],[127,51,172,44],[127,62,172,55],[127,64,172,57],[128,10,173,8,"content"],[128,17,173,15],[129,10,174,8,"message_type"],[129,22,174,20],[129,24,174,22,"type"],[129,28,174,26],[130,10,175,8,"service_request_id"],[130,28,175,26],[130,30,175,28,"chat"],[130,34,175,32],[130,35,175,33,"serviceRequestId"],[131,8,176,6],[131,9,176,7],[131,10,176,8],[132,8,178,6,"console"],[132,15,178,13],[132,16,178,14,"log"],[132,19,178,17],[132,20,178,18],[132,48,178,46],[132,50,178,48,"newMessage"],[132,60,178,58],[132,61,178,59],[133,6,180,4],[133,7,180,5],[133,8,180,6],[133,15,180,13,"error"],[133,20,180,18],[133,22,180,20],[134,8,181,6,"console"],[134,15,181,13],[134,16,181,14,"error"],[134,21,181,19],[134,22,181,20],[134,46,181,44],[134,48,181,46,"error"],[134,53,181,51],[134,54,181,52],[135,8,182,6,"Alert"],[135,22,182,11],[135,23,182,12,"alert"],[135,28,182,17],[135,29,182,18],[135,35,182,24],[135,37,182,26],[135,73,182,62],[135,74,182,63],[136,6,183,4],[136,7,183,5],[136,16,183,14],[137,8,184,6,"setIsLoading"],[137,20,184,18],[137,21,184,19],[137,26,184,24],[137,27,184,25],[138,6,185,4],[139,4,186,2],[139,5,186,3],[140,4,188,2],[140,10,188,8,"markAsRead"],[140,20,188,18],[140,23,188,21],[140,29,188,28,"chatId"],[140,35,188,42],[140,39,188,47],[141,6,189,4],[141,10,189,8],[141,11,189,9,"user"],[141,15,189,13],[141,17,189,15],[142,6,191,4],[142,10,191,8],[143,8,192,6],[144,8,193,6,"setMessages"],[144,19,193,17],[144,20,193,18,"prev"],[144,24,193,22],[144,28,193,22,"Object"],[144,34,193,22],[144,35,193,22,"assign"],[144,41,193,22],[144,46,194,11,"prev"],[144,50,194,15],[145,10,195,8],[145,11,195,9,"chatId"],[145,17,195,15],[145,20,195,18,"prev"],[145,24,195,22],[145,25,195,23,"chatId"],[145,31,195,29],[145,32,195,30],[145,34,195,32,"map"],[145,37,195,35],[145,38,195,36,"msg"],[145,41,195,39],[145,45,196,10,"msg"],[145,48,196,13],[145,49,196,14,"receiverId"],[145,59,196,24],[145,64,196,29,"user"],[145,68,196,33],[145,69,196,34,"id"],[145,71,196,36],[145,74,196,36,"Object"],[145,80,196,36],[145,81,196,36,"assign"],[145,87,196,36],[145,92,196,44,"msg"],[145,95,196,47],[146,12,196,49,"read"],[146,16,196,53],[146,18,196,55],[147,10,196,59],[147,15,196,64,"msg"],[147,18,197,8],[147,19,197,9],[147,23,197,13],[148,8,197,15],[148,10,198,8],[148,11,198,9],[150,8,200,6],[151,8,201,6,"setChats"],[151,16,201,14],[151,17,201,15,"prev"],[151,21,201,19],[151,25,202,8,"prev"],[151,29,202,12],[151,30,202,13,"map"],[151,33,202,16],[151,34,202,17,"chat"],[151,38,202,21],[151,42,203,10,"chat"],[151,46,203,14],[151,47,203,15,"id"],[151,49,203,17],[151,54,203,22,"chatId"],[151,60,203,28],[151,63,203,28,"Object"],[151,69,203,28],[151,70,203,28,"assign"],[151,76,203,28],[151,81,204,19,"chat"],[151,85,204,23],[152,10,204,25,"unreadCount"],[152,21,204,36],[152,23,204,38],[153,8,204,39],[153,13,205,14,"chat"],[153,17,206,8],[153,18,207,6],[153,19,207,7],[155,8,209,6],[156,8,210,6],[156,14,210,12,"apiService"],[156,29,210,22],[156,30,210,23,"put"],[156,33,210,26],[156,34,210,27],[156,44,210,37,"chatId"],[156,50,210,43],[156,57,210,50],[156,58,210,51],[157,6,212,4],[157,7,212,5],[157,8,212,6],[157,15,212,13,"error"],[157,20,212,18],[157,22,212,20],[158,8,213,6,"console"],[158,15,213,13],[158,16,213,14,"error"],[158,21,213,19],[158,22,213,20],[158,46,213,44],[158,48,213,46,"error"],[158,53,213,51],[158,54,213,52],[159,6,214,4],[160,4,215,2],[160,5,215,3],[161,4,217,2],[161,10,217,8,"createChat"],[161,20,217,18],[161,23,217,21],[161,29,217,21,"createChat"],[161,30,217,28,"participantId"],[161,43,217,49],[161,45,217,51,"participantName"],[161,60,217,74],[161,62,217,76,"serviceRequestId"],[161,78,217,101],[161,83,217,123],[162,6,218,4],[162,10,218,8],[162,11,218,9,"user"],[162,15,218,13],[162,17,218,15],[162,23,218,21],[162,27,218,25,"Error"],[162,32,218,30],[162,33,218,31],[162,57,218,55],[162,58,218,56],[163,6,220,4],[163,10,220,8],[164,8,221,6,"setIsLoading"],[164,20,221,18],[164,21,221,19],[164,25,221,23],[164,26,221,24],[165,8,223,6],[165,14,223,12,"chatId"],[165,20,223,18],[165,23,223,21,"serviceRequestId"],[165,39,223,37],[165,42,223,40],[165,53,223,51,"serviceRequestId"],[165,69,223,67],[165,71,223,69],[165,74,223,72],[165,82,223,80,"Date"],[165,86,223,84],[165,87,223,85,"now"],[165,90,223,88],[165,91,223,89],[165,92,223,90],[165,94,223,92],[166,8,225,6],[166,14,225,12,"newChat"],[166,21,225,25],[166,24,225,28],[167,10,226,8,"id"],[167,12,226,10],[167,14,226,12,"chatId"],[167,20,226,18],[168,10,227,8,"participants"],[168,22,227,20],[168,24,227,22],[168,25,227,23,"user"],[168,29,227,27],[168,30,227,28,"id"],[168,32,227,30],[168,34,227,32,"participantId"],[168,47,227,45],[168,48,227,46],[169,10,228,8,"unreadCount"],[169,21,228,19],[169,23,228,21],[169,24,228,22],[170,10,229,8,"serviceRequestId"],[170,26,229,24],[171,10,230,8,"participantNames"],[171,26,230,24],[171,28,230,26],[172,12,231,10],[172,13,231,11,"user"],[172,17,231,15],[172,18,231,16,"id"],[172,20,231,18],[172,23,231,21,"user"],[172,27,231,25],[172,28,231,26,"name"],[172,32,231,30],[173,12,232,10],[173,13,232,11,"participantId"],[173,26,232,24],[173,29,232,27,"participantName"],[174,10,233,8],[175,8,234,6],[175,9,234,7],[176,8,236,6,"setChats"],[176,16,236,14],[176,17,236,15,"prev"],[176,21,236,19],[176,25,236,23],[176,26,236,24],[176,29,236,27,"prev"],[176,33,236,31],[176,35,236,33,"newChat"],[176,42,236,40],[176,43,236,41],[176,44,236,42],[177,8,237,6,"setMessages"],[177,19,237,17],[177,20,237,18,"prev"],[177,24,237,22],[177,28,237,22,"Object"],[177,34,237,22],[177,35,237,22,"assign"],[177,41,237,22],[177,46,237,32,"prev"],[177,50,237,36],[178,10,237,38],[178,11,237,39,"chatId"],[178,17,237,45],[178,20,237,48],[179,8,237,50],[179,10,237,53],[179,11,237,54],[181,8,239,6],[182,8,240,6],[182,14,240,12,"apiService"],[182,29,240,22],[182,30,240,23,"post"],[182,34,240,27],[182,35,240,28],[182,43,240,36],[182,45,240,38],[183,10,241,8,"participant_id"],[183,24,241,22],[183,26,241,24,"participantId"],[183,39,241,37],[184,10,242,8,"service_request_id"],[184,28,242,26],[184,30,242,28,"serviceRequestId"],[185,8,243,6],[185,9,243,7],[185,10,243,8],[186,8,245,6],[186,15,245,13,"chatId"],[186,21,245,19],[187,6,247,4],[187,7,247,5],[187,8,247,6],[187,15,247,13,"error"],[187,20,247,18],[187,22,247,20],[188,8,248,6,"console"],[188,15,248,13],[188,16,248,14,"error"],[188,21,248,19],[188,22,248,20],[188,44,248,42],[188,46,248,44,"error"],[188,51,248,49],[188,52,248,50],[189,8,249,6],[189,14,249,12,"error"],[189,19,249,17],[190,6,250,4],[190,7,250,5],[190,16,250,14],[191,8,251,6,"setIsLoading"],[191,20,251,18],[191,21,251,19],[191,26,251,24],[191,27,251,25],[192,6,252,4],[193,4,253,2],[193,5,253,3],[194,4,255,2],[194,10,255,8,"value"],[194,15,255,30],[194,18,255,33],[195,6,256,4,"chats"],[195,11,256,9],[196,6,257,4,"messages"],[196,14,257,12],[197,6,258,4,"sendMessage"],[197,17,258,15],[198,6,259,4,"markAsRead"],[198,16,259,14],[199,6,260,4,"createChat"],[199,16,260,14],[200,6,261,4,"refreshChats"],[200,18,261,16],[201,6,262,4,"loadMessages"],[201,18,262,16],[202,6,263,4,"isLoading"],[203,4,264,2],[203,5,264,3],[204,4,266,2],[204,24,267,4],[204,28,267,4,"_jsxDevRuntime"],[204,42,267,4],[204,43,267,4,"jsxDEV"],[204,49,267,4],[204,51,267,5,"ChatContext"],[204,62,267,16],[204,63,267,17,"Provider"],[204,71,267,25],[205,6,267,26,"value"],[205,11,267,31],[205,13,267,33,"value"],[205,18,267,39],[206,6,267,39,"children"],[206,14,267,39],[206,16,268,7,"children"],[207,4,268,15],[208,6,268,15,"fileName"],[208,14,268,15],[208,16,268,15,"_jsxFileName"],[208,28,268,15],[209,6,268,15,"lineNumber"],[209,16,268,15],[210,6,268,15,"columnNumber"],[210,18,268,15],[211,4,268,15],[211,11,269,26],[211,12,269,27],[212,2,271,0],[212,3,271,1],[213,2,271,2,"exports"],[213,9,271,2],[213,10,271,2,"ChatProvider"],[213,22,271,2],[213,25,271,2,"ChatProvider"],[213,37,271,2],[214,2,271,2,"_s"],[214,4,271,2],[214,5,43,13,"ChatProvider"],[214,17,43,54],[215,4,43,54],[215,12,44,19,"useAuth"],[215,32,44,26],[216,2,44,26],[217,2,44,26,"_c"],[217,4,44,26],[217,7,43,13,"ChatProvider"],[217,19,43,54],[218,2,273,7],[218,8,273,13,"useChat"],[218,15,273,20],[218,18,273,23,"useChat"],[218,19,273,23],[218,24,273,46],[219,4,273,46,"_s2"],[219,7,273,46],[220,4,274,2],[220,10,274,8,"context"],[220,17,274,15],[220,20,274,18],[220,24,274,18,"useContext"],[220,41,274,28],[220,43,274,29,"ChatContext"],[220,54,274,40],[220,55,274,41],[221,4,275,2],[221,8,275,6],[221,9,275,7,"context"],[221,16,275,14],[221,18,275,16],[222,6,276,4],[222,12,276,10],[222,16,276,14,"Error"],[222,21,276,19],[222,22,276,20],[222,66,276,64],[222,67,276,65],[223,4,277,2],[224,4,278,2],[224,11,278,9,"context"],[224,18,278,16],[225,2,279,0],[225,3,279,1],[226,2,279,2,"exports"],[226,9,279,2],[226,10,279,2,"useChat"],[226,17,279,2],[226,20,279,2,"useChat"],[226,27,279,2],[227,2,279,2,"_s2"],[227,5,279,2],[227,6,273,13,"useChat"],[227,13,273,20],[228,2,273,20],[228,6,273,20,"_c"],[228,8,273,20],[229,2,273,20,"$RefreshReg$"],[229,14,273,20],[229,15,273,20,"_c"],[229,17,273,20],[230,0,273,20],[230,3]],"functionMap":{"names":["<global>","ChatProvider","useEffect$argument_0","refreshChats","backendChats.map$argument_0","chat.participants.filter$argument_0","chat.participants.filter.map$argument_0","loadMessages","backendMessages.map$argument_0","setMessages$argument_0","sendMessage","chats.find$argument_0","chat.participants.find$argument_0","setChats$argument_0","prev.map$argument_0","markAsRead","prev.chatId.map$argument_0","createChat","useChat"],"mappings":"AAA;yDC0C;YCM;GDI;uBEE;wDCW;sBCU,8BD;mBEC,wDF;QDa;GFW;uBME;iECM;QDS;kBEE;QFG;kBEI;QFG;GNE;sBSE;8BCM,oBD;gDEG,kBF;kBDc;QCG;eGG;iBCC;eDG;SHC;GTkB;qBcE;kBNK;oCOE;mEPC;QME;eFG;iBCC;kBDG;SEC;GdS;qBgBE;eJmB,0BI;kBRC,mCQ;GhBgB;CDkB;uBkBE;ClBM"}},"type":"js/module"}]}